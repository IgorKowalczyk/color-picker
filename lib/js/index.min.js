/* (c) Igor Kowalczyk. All rights reserved. */

const body=document.body,getValues=()=>Array.from(textarea.value.split("\n")).filter(t=>!!t&t.length>3).map(t=>t.trim()),setValues=t=>{textarea.value=t.filter(t=>!!t&t.length>3).map(t=>t.trim()).join("\n"),textarea.rows=10},toJSON=t=>JSON.stringify(t,null,2),dataObj={values:[],add(t){this.values.push(t)},init(){btnEXPORT.addEventListener("click",()=>{const t=document.createElement("a"),e=JSON.stringify({palette:dataObj.values},null,2);t.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(e)}`),t.setAttribute("download","palette.json"),t.style.display="none",body.appendChild(t),t.click(),body.removeChild(t)},!1)}},tableObj={reset(){table.hasAttribute("data-active")?(table.textContent="",dataObj.values=[],table.appendChild(document.importNode(table_reset.content,!0))):table.setAttribute("data-active",!0)},add(t){t.forEach((t,e)=>{const a=document.importNode(template.content,!0),o=[...a.querySelectorAll("td")],[l,n,r,s,c,d]=o;[n.id,r.id,s.id]=[`rgb${e}`,`hex${e}`,`hsl${e}`];const{contrast:i}=t;l.dataset.tooltip=`black: ${i.black}\n white: ${i.white}`,l.style.color=i.white>4.5?"white":"black",l.style.background=t.rgb,l.textContent=t.default,n.textContent=t.rgb,r.textContent=t.hex,s.textContent=t.hsl,c.textContent=i.black,d.textContent=i.white,table.appendChild(a)}),btnEXPORT.removeAttribute("data-hide")}},colorUtil={hexString:({r:t,g:e,b:a})=>`#${t}${e}${a}`.toUpperCase(),rgbString:({r:t,g:e,b:a})=>`rgb(${t}, ${e}, ${a})`,hslString:({h:t,s:e,l:a})=>`hsl(${t}, ${e}%, ${a}%)`,rgbToHEX(t,{data:e}=!1){let[a,o,l]=t.match(/\d+/g);return[a,o,l]=[a,o,l].map(t=>parseInt(t,10).toString(16)),[a,o,l]=[a,o,l].map(t=>1===t.length?`0${t}`:t),e?[a,o,l]:colorUtil.hexString({r:a,g:o,b:l})},rgbToHSL(t,{data:e}=!1){let[a,o,l]=Array.isArray(t)?t:t.match(/\d+/g);[a,o,l]=[a,o,l].map(t=>t/255);let n=Math.min(a,o,l),r=Math.max(a,o,l),s=r-n,[c,d,i]=[0,0,.5*(r+n)];return 0!==s&&(c=r===a?(o-l)/s%6:r===o?(l-a)/s+2:(a-o)/s+4,d=s/(1-Math.abs(r+n-1))),[c,d,i]=[60*c,100*d,100*i],c<0&&(c+=360),[c,d,i]=[c,d,i].map(t=>parseInt(t)),e?[c,d,i]:colorUtil.hslString({h:c,s:d,l:i})},hslToRGB(t,{data:e}=!1){let[a,o,l]=t.match(/\d+/g);[a,o,l]=[a/60,o/100,l/100];let n=o*(1-Math.abs(2*l-1)),r=n*(1-Math.abs(a%2-1)),s=l-n/2;[n,r,s]=[n+s,r+s,s].map(t=>Math.round(255*t)),[n,r,s]=[n,r,s].map(t=>t<1?0:t);let[c,d,i]=[[n,r,s],[r,n,s],[s,n,r],[s,r,n],[r,s,n],[n,s,r]][Math.floor(a)%6];return e?[c,d,i]:colorUtil.rgbString({r:c,g:d,b:i})},hslToHEX(t,{data:e}=!1){let[a,o,l]=colorUtil.hslToRGB(t,{data:!0});return[a,o,l]=[a,o,l].map(t=>parseInt(t,10).toString(16)),[a,o,l]=[a,o,l].map(t=>1===t.length?`0${t}`:t),e?[a,o,l]:colorUtil.hexString({r:a,g:o,b:l})},hexToRGB(t,{data:e}=!1){const a=`0x${t.replace("#","")}`,[o,l,n]=[a>>16,a>>8,a].map(t=>255&t);return e?[o,l,n]:colorUtil.rgbString({r:o,g:l,b:n})},hexToHSL(t){const[e,a,o]=colorUtil.hexToRGB(t,{data:!0});return colorUtil.rgbToHSL([e,a,o])},getContrast(t,e){const a=t=>{let[e,a,o]=t.match(/\d+/g);return[e,a,o]=[e,a,o].map(t=>(t=>t<.04045?t/12.92:((t+.055)/1.055)**2.4)(t/255)),[e,a,o]=[.2126*e,.7152*a,.0722*o],[e,a,o].reduce((t,e)=>t+e)},[o,l]=[a(t),a(e)],n=(Math.max(o,l)+.05)/(Math.min(o,l)+.05);return null!=n?n.toPrecision(n>=10?4:3):o===l?1:21}},submit=()=>{tableObj.reset();const t=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,e=/^rgb\((\s*\d{1,3}\s*),(\s*\d{1,3}\s*),(\s*\d{1,3}\s*)\)$/i,a=/^hsl\((\s*\d{1,3}\s*),(\s*\d{1,3}%\s*),(\s*\d{1,3}%\s*)\)$/i,{hexToRGB:o,hexToHSL:l,rgbToHEX:n,rgbToHSL:r,hslToRGB:s,hslToHEX:c,getContrast:d}=colorUtil,i=getValues();textarea.value=i.join("\n"),i.forEach(i=>{t.test(i)&&i.length<6&&(i="#"+[...i.slice(1)].map(t=>`${t}${t}`).join(""));const[h,m,g,b]=t.test(i)?["HEX",o(i),i,l(i)]:e.test(i)?["RGB",i,n(i),r(i)]:a.test(i)?["HSL",s(i),c(i),i]:"";dataObj.add({default:h,rgb:m,hex:g,hsl:b,contrast:{black:d(m,"rgb(0,0,0)"),white:d(m,"rgb(255,255,255)")}})}),tableObj.add(dataObj.values)},copyObj={copyText(t){const e=document.body,a=document.createElement("textarea");a.value=t,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",e.appendChild(a);const o=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);a.select(),document.execCommand("copy"),e.removeChild(a),o&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(o))},copyAnim(t){(t=document.getElementById(t)).className="box pulse",t.addEventListener("animationend",()=>{t.className="box"},!1)}};button.addEventListener("click",()=>{submit()},!1),table.addEventListener("click",t=>{t.target&&"TD"==t.target.nodeName&&(copyObj.copyAnim(t.target.id),copyObj.copyText(t.target.textContent))},!1);const colorArray=["#E5F2EE","rgb(171, 223, 207)","#78CBB4","#4FB79D","hsl(166, 53%, 41%)","#1B9077","#0C7C66","#036855","#005545","#004136","hsl(170, 100%, 8%)","#001A15","rgb(242, 229, 229)","#F2C2C3","#F0A0A1","rgb(236, 127, 129)","#E66467","hsl(357, 68%, 58%)","hsl(357, 61%, 51%)","#BE2A31","#A41E25","#7F131A","#500B10","#1A0305","#F2EAE5","#EFCEBC","#EAB293","#E2986E","#D8814F","hsl(22, 57%, 50%)","#B75D22","#A04E14","#843F0A","#632F05","#3E1F01","#1A0D00","hsl(38, 34%, 92%)","#F0DBAE","#E7C878","rgb(217, 179, 72)","#C49D21","#AB8606","hsl(47, 100%, 28%)","#765E00","#5C4A00","#443700","#2E2600","hsl(48, 100%, 5%)","#EDF2E3","rgb(204, 235, 169)","#99D971","hsl(105, 53%, 51%)","#2EB01E","#069A08","#008310","#006D16","#005817","#004214","#002E0F","#001A09"];setValues(colorArray),dataObj.init(),submit();const toggletheme=document.querySelector('.theme-switch input[type="checkbox"]'),currenttheme=localStorage.getItem("theme");function switchtheme(t){t.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}currenttheme&&(document.documentElement.setAttribute("data-theme",currenttheme),"dark"===currenttheme&&(toggletheme.checked=!0)),toggletheme.addEventListener("change",switchtheme,!1);var scrollposition=window.scrollY,logocontainer=document.getElementsByClassName("nav")[0];window.addEventListener("scroll",function(){(scrollposition=window.scrollY)>=40?logocontainer.classList.add("nav-scrolled"):logocontainer.classList.remove("nav-scrolled")});