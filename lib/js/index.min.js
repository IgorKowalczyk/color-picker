/* (c) Igor Kowalczyk. All rights reserved. */

const toggletheme=document.querySelector('.theme-switch input[type="checkbox"]'),currenttheme=localStorage.getItem("theme");function switchtheme(e){e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}currenttheme&&(document.documentElement.setAttribute("data-theme",currenttheme),"dark"===currenttheme&&(toggletheme.checked=!0)),toggletheme.addEventListener("change",switchtheme,!1);var scrollposition=window.scrollY,logocontainer=document.getElementsByClassName("nav")[0];window.addEventListener("scroll",function(){(scrollposition=window.scrollY)>=40?logocontainer.classList.add("nav-scrolled"):logocontainer.classList.remove("nav-scrolled")});const radios=document.querySelectorAll('input[type="radio"]'),colorContainer=document.getElementById("colorContainer"),userInput=document.getElementById("userInput"),fragment=document.getElementById("template");let boxes=document.querySelectorAll(".box");const updateBoxes=()=>boxes=document.querySelectorAll(".box"),setMode=e=>{boxes.forEach(t=>{t.querySelectorAll("p").forEach(t=>{e in t.dataset==!0?t.removeAttribute("hidden"):t.setAttribute("hidden",!0)})})};radios.forEach(e=>{e.addEventListener("change",e=>setMode(e.target.value))});const setDefault=()=>radios[0].click();setDefault();const sendToClipboard=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const r=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),r&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))},copyAnim=e=>{document.getElementById(e).className="box pulse",document.getElementById(e).addEventListener("animationend",function(t){document.getElementById(e).className="box"},!1)},copyColor=e=>{copyAnim(e),radios.forEach(t=>{if(!0===t.checked){let r=e.match(/\d+/),o=boxes[r].querySelector(`[data-${t.value}]`);sendToClipboard(o.textContent)}})},to16=e=>parseInt(e,10).toString(16),expand=e=>1===e.length?`0${e}`:e,digits=e=>e.match(/\d+/g),minMax=(e,t,r)=>[Math.min(e,t,r),Math.max(e,t,r)],rgbToHEX=e=>{let[t,r,o]=digits(e);return[t,r,o]=[t,r,o].map(to16),[t,r,o]=[t,r,o].map(expand),`#${t}${r}${o}`},rgbToHSL=e=>{let[t,r,o]=digits(e).map(e=>e/255),[n,a]=minMax(t,r,o),[c,l,d,s]=Array(4).fill(0);return d=(a+n)/2,0!==(s=a-n)&&(c=a===t?(r-o)/s%6:a===r?(o-t)/s+2:(t-r)/s+4),(c*=60)<0&&(c+=360),0!==s&&(l=s/(1-Math.abs(a+n-1))),l*=100,d*=100,[c,l,d]=[c,l,d].map(e=>parseInt(e)),`hsl(${c}, ${l}%, ${d}%)`},hexToRGB=e=>{e=+`0x${e.replace("#","")}`;let[t,r,o]=[e>>16,e>>8,e].map(e=>255&e);return`rgb(${t}, ${r}, ${o})`},hexToHSL=e=>(e=hexToRGB(e),rgbToHSL(e));function hslToHEX(e){let[t,r,o]=digits(e);r/=100,o/=100;let[n,a,c,l,d,s]=Array(6).fill(0);return a=(n=(1-Math.abs(2*o-1))*r)*(1-Math.abs(t/60%2-1)),c=o-n/2,0<=t&&t<60?[l,d,s]=[n,a,0]:60<=t&&t<120?[l,d,s]=[a,n,0]:120<=t&&t<180?[l,d,s]=[0,n,a]:180<=t&&t<240?[l,d,s]=[0,a,n]:240<=t&&t<300?[l,d,s]=[a,0,n]:300<=t&&t<360&&([l,d,s]=[n,0,a]),l=Math.round(255*(l+c)).toString(16),d=Math.round(255*(d+c)).toString(16),s=Math.round(255*(s+c)).toString(16),[l,d,s]=[l,d,s].map(expand),`#${l}${d}${s}`}const hslToRGB=e=>{let t=hslToHEX(e);return hexToRGB(t)};function conversions(e){e=e.includes("(")?[e.match(/\w+/g)[0].toUpperCase(),e]:["HEX",e];let t=v1=v2="";switch(e[0]){case"RGB":t=e[1],v1=rgbToHEX(e[1]),v2=rgbToHSL(e[1]);break;case"HEX":t=hexToRGB(e[1]),v1=e[1],v2=hexToHSL(e[1]);break;case"HSL":t=hslToRGB(e[1]),v1=hslToHEX(e[1]),v2=e[1]}return[t,v1,v2]}function submit(){let e=userInput.value;e=e.trim().split("\n"),colorContainer.textContent="";let t=0;e.forEach(e=>{if(""!==e){const r=document.importNode(template.content,!0),o=conversions(e);r.querySelector(".box").id=`box${t}`,r.querySelector(".box").style.backgroundColor=o[0],r.querySelector("[data-default]").textContent=e,r.querySelector("[data-rgb]").textContent=o[0],r.querySelector("[data-hex]").textContent=o[1],r.querySelector("[data-hsl]").textContent=o[2],colorContainer.appendChild(r),t++}}),updateBoxes(),setDefault()}const palette=[{rgb:"rgb(17, 3, 7)",hex:"#110307",hsl:"hsl(345, 70%, 4%)"},{rgb:"rgb(30, 5, 12)",hex:"#1e050c",hsl:"hsl(345, 70%, 7%)"},{rgb:"rgb(43, 8, 17)",hex:"#2b0811",hsl:"hsl(345, 70%, 10%)"},{rgb:"rgb(56, 10, 22)",hex:"#380a16",hsl:"hsl(345, 70%, 13%)"},{rgb:"rgb(69, 12, 27)",hex:"#450c1b",hsl:"hsl(345, 70%, 16%)"}];function submitJSON(){let e=0;userInput.value=colorContainer.textContent="",palette.forEach(t=>{const r=document.importNode(template.content,!0);r.querySelector(".box").style.backgroundColor=t.rgb,r.querySelector(".box").id=`box${e}`;const o=[t.rgb,t.hex,t.hsl];userInput.value+=`${o[e%3]}\n`,r.querySelector("[data-default]").textContent=o[e%3],r.querySelector("[data-rgb]").textContent=t.rgb,r.querySelector("[data-hex]").textContent=t.hex,r.querySelector("[data-hsl]").textContent=t.hsl,colorContainer.appendChild(r),e++}),userInput.rows=e<20?e+1:20}const cArray=["#460a18","rgb(70,10,24)","#350812","rgb(53,8,18)","#23050c","rgb(35,5,12)","#120206","rgb(18,2,6)","#523c3e","rgb(82,60,62)","#373642","rgb(55,54,66)","#27293f","rgb(39,41,63)","#d5aaf0","rgb(213,170,240)","#996699","rgb(153,102,153)","#330033","rgb(51,0,51)","#50b2a1","rgb(80,178,161)","#336669","#336669","rgb(51,102,105)","#295749","rgb(41,87,73)","#a4cabc","rgb(164,202,188)","#ebd596","rgb(235,213,150)","#e79f23","rgb(231,159,35)","rgb(231,159,35)","#eab364","rgb(234,179,100)","#b2373e","rgb(178,55,62)","rgb(178,55,62)","#acdb7a","rgb(172,219,122)","#ffffff","rgb(255,255,255)","#c5d6ea","rgb(197,214,234)","#1c2722","rgb(28,39,34)","#dcca61","#dcca61","rgb(220,202,97)","#fa7d08","rgb(250,125,8)","#d32746","rgb(211,39,70)","#c5d6e8","rgb(197,214,232)","#493c3c","rgb(73,60,60)","rgb(73,60,60)","#f2db74","rgb(242,219,116)","#d64128","rgb(214,65,40)","#feacdd","rgb(254,172,221)","#d3a11e","rgb(211,161,30)","#eee16a","rgb(238,225,106)","#2c1d1a","rgb(44,29,26)","#681e21","rgb(104,30,33)","#be0a16","rgb(190,10,22)","rgb(28,97,150)","rgb(28,97,150)","#3d5392","rgb(61,83,146)","#49407e","rgb(73,64,126)","#4e2f76","rgb(78,47,118)","#521d6b","rgb(82,29,107)","#223344","#a8ea08","rgb(168,234,8)","#cfff00","rgb(207,255,0)","rgb(207,255,0)"],defaultList=()=>{let e="";cArray.forEach(t=>{e+=`${t}\n`}),userInput.value=e.trim(),userInput.rows=10,submit()};defaultList(),document.addEventListener("click",function(e){if(e.target.classList.contains("link-fade")){e.preventDefault();var t=e.target;document.body.style.opacity=0,document.body.addEventListener("transitionend",function(){location.href=t.href})}});var date=document.querySelector(".date");date.innerHTML=(new Date).getFullYear();